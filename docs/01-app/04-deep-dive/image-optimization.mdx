---
title: How Next.js optimizes images
nav_title: Image Optimization
description: Learn how Next.js Image Optimization works.
related:
  title: API Reference
  description: See the API Reference for the full feature set of Next.js Image
  links:
    - app/api-reference/components/image
---

Next.js comes with a built-in Image Optimization API for better loading performance and user experience.

In this deep dive, you'll learn how image optimization works in Next.js.

## The Image Component

The Next.js `<Image />` component extends the HTML `<img>` element for automatic image optimization and to ensure best practices.

```jsx filename="app/page.js"
import Image from 'next/image'

export default function Page() {
  return <Image src="/profile.png" alt="Picture of the author" />
}
```

By default, it's a Client Component that runs on the browser. And using the component signals to the [Next.js Image Loader](#the-image-loader) to optimize and cache the image on the server.

> See the [Image Component API](/docs/app/api-reference/components/image) reference for all available props.

## The Image Loader

Next.js come with a built-in image loader. This loader:

TODO: This should be sequential

- Generates multiple [image sizes](#image-sizing) for different screens using modern [image formats](#supported-image-formats).
- Builds the URLs pointing to the optimized image version, and creates a `srcset` attribute.
- [Caches](#caching-and-revalidating-images) the optimized image in the Next.js file cache.
- Serves the optimized images through the Next.js web server.

> If you would like to serve your images directly from a CDN or external image service, you can also [write your own loader](/docs/app/api-reference/components/image#loader) function.

### Image Sizing

One of the most common image-related performance issues is [layout shift](https://web.dev/articles/cls). This happens when an image pushes other elements around the page as it loads in. It’s a UX problem that it has its own Core Web Vital: [Cumulative Layout Shift](https://web.dev/cls/). Layout shift can be prevented by defining the image dimensions. This allows the browser to reserve enough space for the image before it loads.

The `<Image />` component is designed in a way that cannot contribute to layout shift, and **must** be sized in one of three ways:

1. Automatically, using a local image as a static import.
2. Manually, by including [`width`](/docs/app/api-reference/components/image#width-and-height) and [`height`](/docs/app/api-reference/components/image#width-and-height) props.
3. Implicitly, by using [`fill`](/docs/app/api-reference/components/image#fill) to cause the image to expand to fill its parent element.

### Supported image formats

The built-in loader optimizes common web-friendly formats:

- `jpeg`
- `png`
- `webp`
- `avif`
- `gif`
- `tiff`

And serves `webp` and `avif` images where supported.

### Unsupported image formats

## Caching and revalidating images

> The following describes the caching behavior for the default [Next.js Image Loader](#the-image-loader). For other loaders, please refer to your cloud provider's documentation.

Image caching and revalidation is handled automatically by Next.js at runtime.

1. **First request (miss)**: The image is optimized and cached in the `<distDir>/cache/images` directory.
2. **Subsequent requests (hit)**: The image is served from the cache.
3. **Expired (stale)**: The stale cached image is served immediately, and revalidation is triggered in the background.
4. **Revalidation**: The image is optimized again and saved to the cache with the new expiration date.

TODO: Add a diagram

### Duration

TODO: What is the default duration with no configuration?

### Status

You can check the image cache status with the `x-nextjs-cache` response header:

- `MISS` – Not in cache (first time)
- `HIT` – Cached and fresh
- `STALE` – Cached but expired, will be updated in the background
