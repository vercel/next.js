name: Turbopack Next.js production integration tests

on:
  schedule:
    - cron: '0 6 * * *'
  workflow_dispatch: {}

jobs:
  test-dev:
    name: Next.js integration tests
    uses: ./.github/workflows/integration_tests_reusable.yml
    with:
      name: turbopack-production
      test_type: production
      run_before_test: |
        export TURBOPACK=1 TURBOPACK_BUILD=1
      datadog_args: --tags test.type:turbopack.daily --service Turbopack-build
      e2e_groups: 12
      integration_groups: 12
    secrets: inherit
